{"ast":null,"code":"import _slicedToArray from\"/home/shrubber/Code/rasp-printer/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useEffect,useRef,useState}from'react';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var API_URL='http://localhost:5000/printer/print';function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var fileSelector=useRef(null);useEffect(function(){axios.defaults.headers.post['Access-Control-Allow-Origin']='*';},[]);var handleFileSelection=function handleFileSelection(e){var _fileSelector$current;e.preventDefault();e.stopPropagation();fileSelector===null||fileSelector===void 0?void 0:(_fileSelector$current=fileSelector.current)===null||_fileSelector$current===void 0?void 0:_fileSelector$current.click();};var handleClearFile=function handleClearFile(e){e.preventDefault();e.stopPropagation();setFile(null);};var handleSetFile=function handleSetFile(e){e.preventDefault();e.stopPropagation();var files=e.target.files;if(files&&files.length>0){setFile(files[0]);}};var handleFormSubit=function handleFormSubit(e){e.preventDefault();e.stopPropagation();if(!file)return;var formData=new FormData();formData.append('uploaded',file);axios.post(API_URL,formData,{headers:{'Content-Type':'multipart/form-data'}}).then(function(res){console.log(res);setFile(null);}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rasp-Printer\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"drop-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileSelector,onChange:handleSetFile,accept:\".pdf, .odt, .doc, .docx, image/*\"}),/*#__PURE__*/_jsx(\"span\",{className:\"file-name\",children:file?file.name:'Select or drop a file'}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"clear-button\",onClick:handleClearFile,children:\"Clear\"}),/*#__PURE__*/_jsx(\"button\",{className:\"select-button\",onClick:handleFileSelection,children:\"Select\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"print-btn\",onClick:handleFormSubit,children:\"Print\"})]})]});}export default App;","map":{"version":3,"names":["axios","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","App","_useState","_useState2","_slicedToArray","file","setFile","fileSelector","defaults","headers","post","handleFileSelection","e","_fileSelector$current","preventDefault","stopPropagation","current","click","handleClearFile","handleSetFile","files","target","length","handleFormSubit","formData","FormData","append","then","res","console","log","catch","err","children","className","type","ref","onChange","accept","name","onClick"],"sources":["/home/shrubber/Code/rasp-printer/frontend/src/App.tsx"],"sourcesContent":["import axios from 'axios';\nimport { ChangeEvent, LegacyRef, MouseEvent, useEffect, useRef, useState } from 'react';\nimport './App.css';\n\nconst API_URL = 'http://localhost:5000/printer/print';\n\nfunction App() {\n  const [file, setFile] = useState<File | null>();\n  const fileSelector: LegacyRef<HTMLInputElement> = useRef(null);\n\n  useEffect(() => {\n    axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n  }, []);\n\n  const handleFileSelection = (e: MouseEvent<HTMLButtonElement>): void => {\n    e.preventDefault();\n    e.stopPropagation();\n    fileSelector?.current?.click();\n  };\n\n  const handleClearFile = (e: MouseEvent<HTMLButtonElement>): void => {\n    e.preventDefault();\n    e.stopPropagation();\n    setFile(null);\n  };\n\n  const handleSetFile = (e: ChangeEvent<HTMLInputElement>): void => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const files = e.target.files;\n\n    if (files && files.length > 0) {\n      setFile(files[0]);\n    }\n  };\n\n  const handleFormSubit = (e: MouseEvent<HTMLButtonElement>): void => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('uploaded', file);\n\n    axios\n      .post(API_URL, formData, { headers: { 'Content-Type': 'multipart/form-data' } })\n      .then((res) => {\n        console.log(res);\n        setFile(null);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <>\n      <h1>Rasp-Printer</h1>\n      <form>\n        <div className=\"drop-box\">\n          <input type='file' ref={fileSelector} onChange={handleSetFile}\n              accept='.pdf, .odt, .doc, .docx, image/*'/>\n\n            <span className='file-name'>{ file ? file.name : 'Select or drop a file' }</span>\n\n            <div className=\"action-buttons\">\n              <button className='clear-button' onClick={handleClearFile}>Clear</button>\n              <button className='select-button' onClick={handleFileSelection}>Select</button>\n            </div>\n        </div>\n\n        <button className='print-btn' onClick={handleFormSubit}>Print</button>\n      </form>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}